{"remainingRequest":"C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\babel-loader\\lib\\index.js!C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\src\\components\\PhotoCapture.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\src\\components\\PhotoCapture.vue","mtime":1540087696458},{"path":"C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540087859723},{"path":"C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540087859723},{"path":"C:\\MAMP\\htdocs\\smart city\\Smart-City\\city-report\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nexport default {\n  name: \"PhotoCapture\",\n  data: function data() {\n    return {\n      cameraList: [],\n      selectedCameraIdx: 0,\n      image: null\n    };\n  },\n  computed: {\n    camera: function camera() {\n      return this.cameraList[this.selectedCameraIdx];\n    }\n  },\n  mounted: function mounted() {\n    this.videoElement = this.$refs.video;\n    navigator.mediaDevices.enumerateDevices().then(this.gotDevices).then(this.getStream).catch(this.handleError);\n  },\n  methods: {\n    gotDevices: function gotDevices(infos) {\n      var _this = this;\n\n      infos.forEach(function (info) {\n        if (info.kind === \"videoinput\") {\n          _this.cameraList.push(info.deviceId);\n        }\n      });\n      this.selectedCameraIdx = this.cameraList.length - 1;\n    },\n    getStream: function getStream() {\n      if (window.stream) {\n        window.stream.getTracks().forEach(function (track) {\n          track.stop();\n        });\n      }\n\n      navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId: {\n            exact: this.camera\n          }\n        }\n      }).then(this.gotStream).catch(this.handleError);\n    },\n    gotStream: function gotStream(stream) {\n      window.stream = stream;\n      this.videoElement.srcObject = stream;\n    },\n    handleError: function handleError(error) {\n      console.log(\"Error: \", error);\n    },\n    getImage: function getImage() {\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = this.videoElement.clientWidth;\n      canvas.height = this.videoElement.clientHeight;\n      context.drawImage(this.videoElement, 0, 0, canvas.width, canvas.height);\n      this.image = canvas.toDataURL();\n    }\n  }\n};",{"version":3,"sources":["PhotoCapture.vue"],"names":[],"mappings":";;;;;;;;;AAQA;AACA,eAAA;AACA,QAAA,cADA;AAGA,MAHA,kBAGA;AACA,WAAA;AACA,kBAAA,EADA;AAEA,yBAAA,CAFA;AAGA,aAAA;AAHA,KAAA;AAKA,GATA;AAWA,YAAA;AACA,UADA,oBACA;AACA,aAAA,KAAA,UAAA,CAAA,KAAA,iBAAA,CAAA;AACA;AAHA,GAXA;AAiBA,SAjBA,qBAiBA;AACA,SAAA,YAAA,GAAA,KAAA,KAAA,CAAA,KAAA;AACA,cAAA,YAAA,CACA,gBADA,GAEA,IAFA,CAEA,KAAA,UAFA,EAGA,IAHA,CAGA,KAAA,SAHA,EAIA,KAJA,CAIA,KAAA,WAJA;AAKA,GAxBA;AA0BA,WAAA;AACA,cADA,sBACA,KADA,EACA;AAAA;;AACA,YAAA,OAAA,CAAA,gBAAA;AACA,YAAA,KAAA,IAAA,KAAA,YAAA,EAAA;AACA,gBAAA,UAAA,CAAA,IAAA,CAAA,KAAA,QAAA;AACA;AACA,OAJA;AAKA,WAAA,iBAAA,GAAA,KAAA,UAAA,CAAA,MAAA,GAAA,CAAA;AACA,KARA;AAUA,aAVA,uBAUA;AACA,UAAA,OAAA,MAAA,EAAA;AACA,eAAA,MAAA,CAAA,SAAA,GAAA,OAAA,CAAA,iBAAA;AACA,gBAAA,IAAA;AACA,SAFA;AAGA;;AAEA,gBAAA,YAAA,CACA,YADA,CACA;AACA,eAAA;AACA,oBAAA;AAAA,mBAAA,KAAA;AAAA;AADA;AADA,OADA,EAMA,IANA,CAMA,KAAA,SANA,EAOA,KAPA,CAOA,KAAA,WAPA;AAQA,KAzBA;AA2BA,aA3BA,qBA2BA,MA3BA,EA2BA;AACA,aAAA,MAAA,GAAA,MAAA;AACA,WAAA,YAAA,CAAA,SAAA,GAAA,MAAA;AACA,KA9BA;AAgCA,eAhCA,uBAgCA,KAhCA,EAgCA;AACA,cAAA,GAAA,CAAA,SAAA,EAAA,KAAA;AACA,KAlCA;AAoCA,YApCA,sBAoCA;AACA,UAAA,SAAA,SAAA,aAAA,CAAA,QAAA,CAAA;AACA,UAAA,UAAA,OAAA,UAAA,CAAA,IAAA,CAAA;AACA,aAAA,KAAA,GAAA,KAAA,YAAA,CAAA,WAAA;AACA,aAAA,MAAA,GAAA,KAAA,YAAA,CAAA,YAAA;AACA,cAAA,SAAA,CAAA,KAAA,YAAA,EAAA,CAAA,EAAA,CAAA,EAAA,OAAA,KAAA,EAAA,OAAA,MAAA;AACA,WAAA,KAAA,GAAA,OAAA,SAAA,EAAA;AACA;AA3CA;AA1BA,CAAA","sourcesContent":["<template>\r\n  <div class=\"photo-capture\">\r\n    <video muted autoplay ref=\"video\"></video>\r\n    <div class=\"photo\" @click=\"getImage\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nexport default {\r\n  name: \"PhotoCapture\",\r\n\r\n  data() {\r\n    return {\r\n      cameraList: [],\r\n      selectedCameraIdx: 0,\r\n      image: null\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    camera() {\r\n      return this.cameraList[this.selectedCameraIdx];\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.videoElement = this.$refs.video;\r\n    navigator.mediaDevices\r\n      .enumerateDevices()\r\n      .then(this.gotDevices)\r\n      .then(this.getStream)\r\n      .catch(this.handleError);\r\n  },\r\n\r\n  methods: {\r\n    gotDevices(infos) {\r\n      infos.forEach(info => {\r\n        if (info.kind === \"videoinput\") {\r\n          this.cameraList.push(info.deviceId);\r\n        }\r\n      });\r\n      this.selectedCameraIdx = this.cameraList.length - 1;\r\n    },\r\n\r\n    getStream() {\r\n      if (window.stream) {\r\n        window.stream.getTracks().forEach(track => {\r\n          track.stop();\r\n        });\r\n      }\r\n\r\n      navigator.mediaDevices\r\n        .getUserMedia({\r\n          video: {\r\n            deviceId: { exact: this.camera }\r\n          }\r\n        })\r\n        .then(this.gotStream)\r\n        .catch(this.handleError);\r\n    },\r\n\r\n    gotStream(stream) {\r\n      window.stream = stream;\r\n      this.videoElement.srcObject = stream;\r\n    },\r\n\r\n    handleError(error) {\r\n      console.log(\"Error: \", error);\r\n    },\r\n\r\n    getImage() {\r\n      let canvas = document.createElement('canvas')\r\n      let context = canvas.getContext('2d')\r\n      canvas.width = this.videoElement.clientWidth\r\n      canvas.height = this.videoElement.clientHeight\r\n      context.drawImage(this.videoElement, 0, 0, canvas.width, canvas.height)\r\n      this.image = canvas.toDataURL()\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.photo-capture {\r\n  video {\r\n    position: fixed;\r\n    right: 0;\r\n    bottom: 0;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    background-color: #353535;\r\n  }\r\n\r\n  .photo {\r\n    position: fixed;\r\n    bottom: 3em;\r\n    left: 50%;\r\n    margin-left: -3em;\r\n    height: 6em;\r\n    width: 6em;\r\n    border-radius: 6em;\r\n    border: solid 0.5em #fff;\r\n    background-color: #7b50ff;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\components"}]}